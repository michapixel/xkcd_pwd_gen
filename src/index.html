<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>XKCD-secure password generator</title>
	<link rel="stylesheet" type="text/css" href="vendor/css/milligram/milligram-1.3.0/dist/milligram.min.css">
	<link rel="stylesheet" href="vendor/css/normalize/normalize.min.css">
	<link rel="stylesheet" href="css/fonts.min.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<header class="container">
		<h1>XKCD-secure password generator</h1>
		
	</header><!-- /header -->
	<main class="container">
		<section>
			
				<form>
					<fieldset>
						<div class="row">
							<div class="column">
								<label for="result">Your new password:</label>
								<input id="result" type="text" />
							</div>
						</div>
						<div class="row">
							<div class="column">
								<label for="opt_lang">Options</label>
								<select id="opt_lang" disabled title="currently only german">
									<option value="de">german</option>
								</select>
							</div>
							<div class="column">
								<label for="opt_variant">Variant</label>
								<select id="opt_variant">
									<option value="short" selected>short</option>
									<option value="short">long</option>
								</select>
							</div>
						</div>
						<!--  -->
						<div class="row">
							<div class="column">
								<button class="form button" type="button" onclick="pwgen()">generate</button>
							</div>
						</div>
					</fieldset>
				</form>
		</section>
		<section>
			<h2>Explanation</h2>
			<div class="explanation">
				<h3>as comic</h3>
				<div class="strip xkcd">
					<img src="https://imgs.xkcd.com/comics/password_strength.png" alt="">
				</div>
				<h3>as video (german language)</h3>
				<div class="video">
					<iframe src="https://youtu.be/jtFc6B5lmIM"></iframe>
				</div>
			</div>
		</section>
	</main>
	<footer class="container">
      <h4>Inspired by / using following ideas:</h4>
      <ul>
      	<li><a href="https://xkcd.com/936/" target="_blank">https://xkcd.com/936/</a> (idea)</li>
      	<li><a href="https://youtu.be/jtFc6B5lmIM" target="_blank">Explanation in german</a> (explanation)</li>
      	<li><a href="https://xkcd.com/792/" target="_blank">https://xkcd.com/792/</a> (further read)</li>
      	<li><del>https://github.com/ckknight/random-js</del> <ins>currently not using this, but maybe we need a better random-generator</ins></li>
      	<li><a href="http://milligram.io" target="_blank">http://milligram.io</a> (css)</li>
      	<li>Wordlists:
      		<ul>
      			<li>diceware german curated list (~3900 words 4+ letters length)</li>
      			<li>uni-leipzig top 10000 (2+ letters length) <a href="http://wortschatz.uni-leipzig.de/html/wliste.html" target="_blank"></a></li>
      		</ul>
      	</li>
      </ul>
      <!-- ########## -->
		<!-- <script src="vendor/js/random/lib/random.min.js" type="text/javascript"></script> -->
		<script>
			var lang = 'de';
			var variant = 'short';
			var wordlist = [];

			function loadJSON( file, callback ) {   
		    	var xobj = new XMLHttpRequest();
		      xobj.overrideMimeType("application/json");
		    	xobj.open('GET', file, true);
		    	xobj.onreadystatechange = function () {
		         if (xobj.readyState == 4 && xobj.status == "200") {
		            callback(xobj.responseText);
		         }
		    	};
		    	xobj.send(null);  
		 	};

	 		function getRandomInt(min, max) {
				min = Math.ceil(min);
				max = Math.floor(max);
				return Math.floor(Math.random() * (max - min +1)) + min; 
			};

			// async, so wordlist won't be defined until fully loaded, keep in mind!
			loadJSON('data/wordlist.json', function(response) {
    			wordlist = JSON.parse(response);
 			});

         function pwgen() {
            var pw = [];
            // 
            var words = 4;
            for ( var i = 0; i < words; i++ ) {
            	// pick random word:
               var w = wordlist[lang][variant][getRandomInt(0, wordlist[lang][variant].length-1)];
               pw.push(w);
            }
            document.getElementById( 'result' ).value = pw.join( ' ' ).toLowerCase();
         };
      </script>
	</footer>
</body>
</html>